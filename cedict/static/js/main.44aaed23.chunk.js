(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),c=n.n(i),o=(n(88),n(10)),s=n(23),u=n(80),l=n.n(u),f=n(17),d=n.n(f),p=n(24),m=n.n(p),h=(n(89),n(90),n(8)),b=n.n(h),g=n(29),v=n(16),E=n(70),O=n(71),j=n(81),w=n(72),x=n(82),y=function(e){function t(){var e;return Object(E.a)(this,t),(e=Object(j.a)(this,Object(w.a)(t).call(this,"CEDict"))).entries=void 0,e.version(1).stores({entries:"++id, *word"}),e.entries=e.table("entries"),e}return Object(x.a)(t,e),Object(O.a)(t,[{key:"clearDictionary",value:function(){return this.entries.clear()}},{key:"importDictionary",value:function(){var e=Object(v.a)(b.a.mark(function e(t,n){var a=this;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transaction("rw",this.entries,Object(v.a)(b.a.mark(function e(){var r,i,c,o,s,u,l,f;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.split("\n"),i=/(.+)\s(.+)\s\[(.+)\]\s\/(.+)\/\s*$/,c=0;case 3:if(!(c<r.length)){e.next=26;break}o=[],s=void 0,s=0;case 7:if(!(s<Math.min(1e4,r.length-c))){e.next=20;break}if("#"!==(u=r[c+s])[0]){e.next=11;break}return e.abrupt("continue",17);case 11:if(null!==(l=u.match(i))){e.next=14;break}throw new Error("Invalid line "+u);case 14:f={word:l[1],pinyin:l[3],description:l[4].split("/").join("\n")},o.push(f),l[1]!==l[2]&&o.push(Object(g.a)({},f,{word:l[2]}));case 17:s++,e.next=7;break;case 20:return e.next=22,a.entries.bulkAdd(o);case 22:n&&n(100*(c+s)/r.length);case 23:c+=1e4,e.next=3;break;case 26:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(n(73).a);y.Context=r.a.createContext(new y),y.DICTIONARY_PATH="/cedict/cedict_ts.u8.txt";var k,I=y,C=n(9),D=n(21),S=n.n(D),N=n(36),A=n.n(N),L=n(74),z=n.n(L);!function(e){e[e.None=0]="None",e[e.NotInitialized=1]="NotInitialized",e[e.LoadingDict=2]="LoadingDict",e[e.ImportingIntoDB=3]="ImportingIntoDB",e[e.Loaded=4]="Loaded",e[e.Error=5]="Error"}(k||(k={}));var B=k,F=function(e){return r.a.createElement(r.a.Fragment,null,e.status===B.LoadingDict&&r.a.createElement("p",null,"Loading Dictionary File..."),e.status===B.ImportingIntoDB&&r.a.createElement("p",null,"Importing into IndexedDB..."),e.status===B.Loaded&&r.a.createElement("p",null,"Done!"),r.a.createElement(z.a,{animated:!0,now:e.progress}))},T=function(e){var t=e.db,n=(Object(C.a)(e,["db"]),Object(a.useState)(B.None)),i=Object(o.a)(n,2),c=i[0],s=i[1],u=Object(a.useState)(0),l=Object(o.a)(u,2),f=l[0],p=l[1],h=Object(a.useState)(0),g=Object(o.a)(h,2),E=g[0],O=g[1],j=c===B.ImportingIntoDB||c===B.LoadingDict;return Object(a.useEffect)(function(){(function(){var e=Object(v.a)(b.a.mark(function e(){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.entries.count();case 2:n=e.sent,s(0===n?B.NotInitialized:B.Loaded),p(n);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[t]),Object(a.useEffect)(function(){var e=A.a.CancelToken.source();if(j){var n=function(){var n=Object(v.a)(b.a.mark(function n(){var a;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A.a.get(I.DICTIONARY_PATH,{responseType:"text",timeout:1e4,cancelToken:e.token,onDownloadProgress:function(e){O(100*e.loaded/e.total)}});case 2:return a=n.sent,s(B.ImportingIntoDB),O(0),n.next=7,t.importDictionary(a.data,O);case 7:return s(B.Loaded),n.t0=p,n.next=11,t.entries.count();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();s(B.LoadingDict),n()}return function(){e.cancel()}},[t,j]),r.a.createElement(r.a.Fragment,null,c===B.NotInitialized?r.a.createElement(m.a,null,"Load Dictionary"):r.a.createElement(d.a.Text,null," ".concat(f," entries")),r.a.createElement(S.a,{onHide:function(){},show:c!==B.Loaded&&c!==B.None,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(S.a.Header,null,r.a.createElement(S.a.Title,{id:"contained-modal-title-vcenter"},"Import")),r.a.createElement(S.a.Body,null,c===B.NotInitialized&&r.a.createElement("p",null,"Imports Chinese-English Dictionary DataBase at first. (",r.a.createElement("i",null,"It may takes a long time."),")"),j&&r.a.createElement(F,{progress:E,status:c})),r.a.createElement(S.a.Footer,null,r.a.createElement(m.a,{disabled:j,onClick:function(){return s(B.LoadingDict)}},"Continue"))))},P=function(e){return r.a.createElement(I.Context.Consumer,null,function(t){return r.a.createElement(T,Object.assign({db:t},e))})},R=n(38),$=n(75),H=n.n($),M=n(78),Y=n.n(M),_=n(79),J=n.n(_),W=n(25),q=n.n(W),K=(n(145),{a:["a","\u0101","\xe1","\u01ce","\xe0","a"],e:["e","\u0113","\xe9","\u011b","\xe8","e"],i:["i","\u012b","\xed","\u01d0","\xec","i"],o:["o","\u014d","\xf3","\u01d2","\xf2","o"],u:["u","\u016b","\xfa","\u01d4","\xf9","u"],v:["\xfc","\u01d6","\u01d8","\u01da","\u01dc","\xfc"]});String.prototype.isAlpha=function(){return/^[A-Za-z]$/.test(this)},String.prototype.isPinyinVowel=function(){return/^[aeiouv\u00fc]$/.test(this)},String.prototype.lastIndexOfRegex=function(e){for(var t=-1,n=0;n<this.length;n++)e.test(this.charAt(n))&&(t=n);return t},String.prototype.replaceAt=function(e,t){return e>=0&&e<this.length&&"string"===typeof t?this.substring(0,e)+t+this.substring(e+1):this},String.prototype.convertPinyin=function(){var e=this.toLocaleLowerCase(),t=e.search(/[1-5]/),n=e.search(/[aeiouv\u00fc]/);if(e.length>7||t<1||t!==e.length-1||n<0)return console.log("String.prototype.convertPinyin:"+this+" is not a valid pinyin word."),this;var a=parseInt(e[t]);if(/[ae]/.test(e)){var r=e.search(/[ae]/);e=e.replaceAt(r,K[e.charAt(r)][a])}else if(/ou/.test(e)){r=e.search(/ou/);e=e.replaceAt(r,K[e.charAt(r)][a])}else{r=e.lastIndexOfRegex(/[aeiouv\u00fc]/);var i=e.charAt(r);"\xfc"==i&&(i="v"),e=e.replaceAt(r,K[i][a])}return e=e.substring(0,e.length-1)};var V=function(e){if("string"!==typeof e)return e;for(var t="",n=0;e.length>0;)if(e.charAt(n).isAlpha()){0!==n&&(t+=e.substring(0,n),e=e.substring(n),n=0);var a=e.search(/[1-5]/),r=e.search(/\s/);a>0&&a<7&&(r<0||r>a)?(t+=e.substring(0,a+1).convertPinyin(),e=e.substring(a+1)):r<0?(t+=e.substring(0),e=""):(t+=e.substring(0,r+1),e=e.substring(r+1))}else n>=e.length?(t+=e.substring(0),e=""):n++;return t},Z=function(e){var t=e.hanzi,n=e.pinyin,i=Object(C.a)(e,["hanzi","pinyin"]);if(t){var c=t.split(""),o=n.split(" ");return r.a.createElement("ruby",Object.assign({},i,{lang:"zh"}),c.map(function(e,t){return r.a.createElement(a.Fragment,{key:t+e},e,r.a.createElement("rt",null,V(o[t])))}))}return r.a.createElement(r.a.Fragment,null,V(n))},G=/([^\s!-\/:-@[-`{-~]+)?(?:\|([^\s!-\/:-@[-`{-~]+))?\[([\w\s]+)\]/;var Q,U,X=function(e){for(var t,n=[],a=0,r=new RegExp(G,"g");null!=(t=r.exec(e));)n.push(e.substring(a,t.index)),n.push(t.slice(1)),a=r.lastIndex;return a<e.length&&n.push(e.substring(a)),n},ee=function(e){var t=e.text,n=Object(C.a)(e,["text"]);return r.a.createElement("div",Object.assign({className:"description"},n),X(t).map(function(e,t){if("string"===typeof e)return e;var n=Object(o.a)(e,3),a=n[0],i=n[2];return r.a.createElement(Z,{key:t,hanzi:a,pinyin:i})}))},te=function(e){var t=e.entries,n=Object(C.a)(e,["entries"]);return r.a.createElement(H.a,Object.assign({},n,{show:t.length>0,placement:"bottom",popperConfig:{modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}}}),r.a.createElement(Y.a,{id:"popover"},n.children))},ne=function(e){e.entries;var t=Object(C.a)(e,["entries"]);return r.a.createElement("div",{className:"fixed-popover"},t.children)},ae=function(e){var t=e.entries,n=Object(C.a)(e,["entries"]),a=q()()?ne:te;return r.a.createElement(a,Object.assign({entries:t},n),r.a.createElement(J.a,{size:"sm",className:"m-0"},r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{className:0===t?"highlight":"",key:"".concat(t,":").concat(e)},r.a.createElement("th",{lang:"cn"},r.a.createElement(Z,{hanzi:e.word,pinyin:e.pinyin})),r.a.createElement("td",null,r.a.createElement(ee,{text:e.description})))}))))},re=function(e,t,n){for(var a=[],r=0;r<n&&!/^[\s\r\n]*$/.test(e.charAt(t-r));++r)for(var i=0;i<n&&!/^[\s\r\n]*$/.test(e.charAt(t+i));++i)a.push({word:e.substring(t-r,t+i+1),begin:t-r,end:t+i});return a},ie=function(e){var t=e.db,n=e.text,i=e.onCharFocus,c=Object(C.a)(e,["db","text","onCharFocus"]),s=Object(a.useState)(void 0),u=Object(o.a)(s,2),l=u[0],f=u[1],d=Object(a.useState)([]),p=Object(o.a)(d,2),m=p[0],h=p[1],E=Object(a.useState)(void 0),O=Object(o.a)(E,2),j=O[0],w=O[1],x=l&&void 0!==l.dataset.index?parseInt(l.dataset.index):void 0;return Object(a.useEffect)(function(){return function(){var e=Object(v.a)(b.a.mark(function e(){var a,r,i,c,o,s,u,l;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"number"===typeof x){e.next=3;break}return e.abrupt("return");case 3:r=re(n,x,8),i=!0,c=!1,o=void 0,e.prev=7,s=b.a.mark(function e(){var n,r,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.value,e.next=3,t.entries.where("word").equals(n.word).toArray();case 3:r=e.sent,i=r.map(function(e){return Object(g.a)({},e,n)}),a=[].concat(Object(R.a)(a),Object(R.a)(i));case 6:case"end":return e.stop()}},e)}),u=r[Symbol.iterator]();case 10:if(i=(l=u.next()).done){e.next=15;break}return e.delegateYield(s(),"t0",12);case 12:i=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),c=!0,o=e.t1;case 21:e.prev=21,e.prev=22,i||null==u.return||u.return();case 24:if(e.prev=24,!c){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a=a.sort(function(e,t){return t.word.length-e.word.length}),w(a[0]),h(a);case 32:case"end":return e.stop()}},e,null,[[7,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}()(),function(){}},[t,n,l,x]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({},c,{className:"textview",onMouseOver:function(e){var t=e.target;"SPAN"===t.tagName&&f(t)},onMouseOut:function(){return f(void 0)},onClick:function(e){i&&i(x),c.onClick&&c.onClick(e)}}),n.split("").map(function(e,t){var n={"data-index":t,className:""};return j&&j.begin<=t&&t<=j.end&&(n.className="highlight"),"\n"===e?r.a.createElement("br",{key:e+t}):r.a.createElement("span",Object.assign({},n,{key:e+t}),e)})),r.a.createElement(ae,{target:l,entries:m}))},ce=function(e){return r.a.createElement(I.Context.Consumer,null,function(t){return r.a.createElement(ie,Object.assign({},e,{db:t}))})},oe=function(e){var t=e.text,n=e.focus,i=Object(C.a)(e,["text","focus"]),c=Object(a.useRef)(null);return Object(a.useEffect)(function(){c.current&&c.current.focus()},[]),Object(a.useEffect)(function(){void 0!==n&&c.current&&c.current.setSelectionRange(n,n)},[n]),r.a.createElement("textarea",Object.assign({},i,{rows:t.split("\n").length,ref:c,value:t,className:"texteditor"}))},se=["\u8f93\u5165\u4e2d\u6587","","\u77e5\u5929\u4e4b\u6240\u4e3a,\u77e5\u4eba\u4e4b\u6240\u4e3a\u8005,\u81f3\u77e3\u3002","\u77e5\u5929\u4e4b\u6240\u4e3a\u8005,\u5929\u800c\u751f\u4e5f\uff1b\u77e5\u4eba\u4e4b\u6240\u4e3a\u8005,\u4ee5\u5176\u77e5\u4e4b\u6240\u77e5\u4ee5\u517b\u5176\u77e5\u4e4b\u6240\u4e0d\u77e5,\u7ec8\u5176\u5929\u5e74\u800c\u4e0d\u4e2d\u9053\u592d\u8005:\u662f\u77e5\u4e4b\u76db\u4e5f\u3002"].join("\n");!function(e){e[e.Edit=1]="Edit",e[e.Show=2]="Show"}(U||(U={}));var ue=(Q={},Object(s.a)(Q,U.Edit,"OK"),Object(s.a)(Q,U.Show,"Edit"),Q),le=function(){var e=Object(a.useState)(U.Show),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(se),s=Object(o.a)(c,2),u=s[0],f=s[1],p=Object(a.useState)(void 0),h=Object(o.a)(p,2),b=h[0],g=h[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{bg:"dark",variant:"dark"},r.a.createElement(d.a.Brand,{href:"#"},"HoverDictCN"),r.a.createElement(P,null),r.a.createElement(d.a.Collapse,{className:"justify-content-end"},r.a.createElement(d.a.Text,null,r.a.createElement(m.a,{variant:"outline-light",onMouseDown:function(){n===U.Show?i(U.Edit):i(U.Show)}},ue[n])))),r.a.createElement(l.a,null,r.a.createElement(I.Context.Provider,{value:new I},n===U.Edit?r.a.createElement(oe,{lang:"zh",onChange:function(e){return f(e.target.value)},onBlur:function(e){return!q()()&&i(U.Show)},text:u,focus:b}):r.a.createElement(ce,{lang:"zh",onClick:function(e){return!q()()&&i(U.Edit)},text:u,onCharFocus:function(e){return g(e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},83:function(e,t,n){e.exports=n(154)},88:function(e,t,n){},89:function(e,t,n){}},[[83,1,2]]]);