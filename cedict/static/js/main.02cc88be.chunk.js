(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),c=n.n(i),o=(n(93),n(8)),s=n(25),u=n(85),l=n.n(u),d=n(20),f=n.n(d),m=n(17),b=n.n(m),p=n(26),h=n(23),g=(n(97),n(98),n(11)),v=n.n(g),E=n(31),O=n(19),j=n(74),x=n(75),w=n(86),y=n(76),k=n(87),I=function(e){function t(){var e;return Object(j.a)(this,t),(e=Object(w.a)(this,Object(y.a)(t).call(this,"CEDict"))).entries=void 0,e.version(1).stores({entries:"++id, *word"}),e.entries=e.table("entries"),e}return Object(k.a)(t,e),Object(x.a)(t,[{key:"clearDictionary",value:function(){return this.entries.clear()}},{key:"importDictionary",value:function(){var e=Object(O.a)(v.a.mark(function e(t,n){var a=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transaction("rw",this.entries,Object(O.a)(v.a.mark(function e(){var r,i,c,o,s,u,l,d;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.split("\n"),i=/(.+)\s(.+)\s\[(.+)\]\s\/(.+)\/\s*$/,c=0;case 3:if(!(c<r.length)){e.next=26;break}o=[],s=void 0,s=0;case 7:if(!(s<Math.min(1e4,r.length-c))){e.next=20;break}if("#"!==(u=r[c+s])[0]){e.next=11;break}return e.abrupt("continue",17);case 11:if(null!==(l=u.match(i))){e.next=14;break}throw new Error("Invalid line "+u);case 14:d={word:l[1],pinyin:l[3],description:l[4].split("/").join("\n")},o.push(d),l[1]!==l[2]&&o.push(Object(E.a)({},d,{word:l[2]}));case 17:s++,e.next=7;break;case 20:return e.next=22,a.entries.bulkAdd(o);case 22:n&&n(100*(c+s)/r.length);case 23:c+=1e4,e.next=3;break;case 26:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(n(77).a);I.Context=r.a.createContext(new I),I.DICTIONARY_PATH="/cedict/cedict_ts.u8.txt";var C,S=I,D=n(10),N=n(15),A=n.n(N),z=n(39),L=n.n(z),F=n(78),B=n.n(F);!function(e){e[e.None=0]="None",e[e.NotInitialized=1]="NotInitialized",e[e.LoadingDict=2]="LoadingDict",e[e.ImportingIntoDB=3]="ImportingIntoDB",e[e.Loaded=4]="Loaded",e[e.Error=5]="Error"}(C||(C={}));var T=C,P=function(e){return r.a.createElement(r.a.Fragment,null,e.status===T.LoadingDict&&r.a.createElement("p",null,"Loading Dictionary File..."),e.status===T.ImportingIntoDB&&r.a.createElement("p",null,"Importing into IndexedDB..."),e.status===T.Loaded&&r.a.createElement("p",null,"Done!"),r.a.createElement(B.a,{animated:!0,now:e.progress}))},H=n(79),R=n.n(H),$=function(e){var t=e.db,n=e.onSuccess,i=(Object(D.a)(e,["db","onSuccess"]),Object(a.useState)(!1)),c=Object(o.a)(i,2),s=c[0],u=c[1],l=Object(a.useState)(!1),d=Object(o.a)(l,2),f=d[0],m=d[1],g=function(){return!s&&m(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{variant:"link",onClick:function(){return m(!0)}},r.a.createElement(p.a,{icon:h.d,className:"text-white-50"})),r.a.createElement(A.a,{centered:!0,show:f,onHide:g},r.a.createElement(A.a.Header,null,r.a.createElement(A.a.Title,null,"Confirm")),r.a.createElement(A.a.Body,null,"Are you sure you want to delete the local database?"),r.a.createElement(A.a.Footer,null,r.a.createElement(b.a,{disabled:s,variant:"secondary",onClick:g},"Cancel"),r.a.createElement(b.a,{disabled:s,variant:"primary",onClick:function(){u(!0),t.clearDictionary().then(function(){u(!1),n&&n(),g()})}},s?r.a.createElement(R.a,{as:"span",animation:"border",variant:"light",size:"sm",role:"status"}):"OK"))))},M=function(e){var t=e.db,n=(Object(D.a)(e,["db"]),Object(a.useState)(T.None)),i=Object(o.a)(n,2),c=i[0],s=i[1],u=Object(a.useState)(0),l=Object(o.a)(u,2),d=l[0],m=l[1],p=Object(a.useState)(0),h=Object(o.a)(p,2),g=h[0],E=h[1],j=c===T.ImportingIntoDB||c===T.LoadingDict;return Object(a.useEffect)(function(){(function(){var e=Object(O.a)(v.a.mark(function e(){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.entries.count();case 2:n=e.sent,s(0===n?T.NotInitialized:T.Loaded),m(n);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[t]),Object(a.useEffect)(function(){var e=L.a.CancelToken.source();if(j){var n=function(){var n=Object(O.a)(v.a.mark(function n(){var a;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,L.a.get(S.DICTIONARY_PATH,{responseType:"text",timeout:1e4,cancelToken:e.token,onDownloadProgress:function(e){E(100*e.loaded/e.total)}});case 2:return a=n.sent,s(T.ImportingIntoDB),E(0),n.next=7,t.importDictionary(a.data,E);case 7:return s(T.Loaded),n.t0=m,n.next=11,t.entries.count();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();s(T.LoadingDict),n()}return function(){e.cancel()}},[t,j]),r.a.createElement(r.a.Fragment,null,c===T.NotInitialized?r.a.createElement(b.a,null,"Load Dictionary"):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a.Text,null," ".concat(d," entries")),r.a.createElement($,{db:t,onSuccess:function(){m(0),s(T.NotInitialized)}})),r.a.createElement(A.a,{onHide:function(){},show:c!==T.Loaded&&c!==T.None,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(A.a.Header,null,r.a.createElement(A.a.Title,{id:"contained-modal-title-vcenter"},"Import")),r.a.createElement(A.a.Body,null,c===T.NotInitialized&&r.a.createElement("p",null,"Imports Chinese-English Dictionary DataBase at first. (",r.a.createElement("i",null,"It may takes a long time."),")"),j&&r.a.createElement(P,{progress:g,status:c})),r.a.createElement(A.a.Footer,null,r.a.createElement(b.a,{disabled:j,onClick:function(){return s(T.LoadingDict)}},"Continue"))))},Y=function(e){return r.a.createElement(S.Context.Consumer,null,function(t){return r.a.createElement(M,Object.assign({db:t},e))})},_=n(41),J=n(80),K=n.n(J),W=n(83),q=n.n(W),V=n(84),Z=n.n(V),G=n(27),Q=n.n(G),U=(n(149),{a:["a","\u0101","\xe1","\u01ce","\xe0","a"],e:["e","\u0113","\xe9","\u011b","\xe8","e"],i:["i","\u012b","\xed","\u01d0","\xec","i"],o:["o","\u014d","\xf3","\u01d2","\xf2","o"],u:["u","\u016b","\xfa","\u01d4","\xf9","u"],v:["\xfc","\u01d6","\u01d8","\u01da","\u01dc","\xfc"]});String.prototype.isAlpha=function(){return/^[A-Za-z]$/.test(this)},String.prototype.isPinyinVowel=function(){return/^[aeiouv\u00fc]$/.test(this)},String.prototype.lastIndexOfRegex=function(e){for(var t=-1,n=0;n<this.length;n++)e.test(this.charAt(n))&&(t=n);return t},String.prototype.replaceAt=function(e,t){return e>=0&&e<this.length&&"string"===typeof t?this.substring(0,e)+t+this.substring(e+1):this},String.prototype.convertPinyin=function(){var e=this.toLocaleLowerCase(),t=e.search(/[1-5]/),n=e.search(/[aeiouv\u00fc]/);if(e.length>7||t<1||t!==e.length-1||n<0)return console.log("String.prototype.convertPinyin:"+this+" is not a valid pinyin word."),this;var a=parseInt(e[t]);if(/[ae]/.test(e)){var r=e.search(/[ae]/);e=e.replaceAt(r,U[e.charAt(r)][a])}else if(/ou/.test(e)){r=e.search(/ou/);e=e.replaceAt(r,U[e.charAt(r)][a])}else{r=e.lastIndexOfRegex(/[aeiouv\u00fc]/);var i=e.charAt(r);"\xfc"==i&&(i="v"),e=e.replaceAt(r,U[i][a])}return e=e.substring(0,e.length-1)};var X=function(e){if("string"!==typeof e)return e;for(var t="",n=0;e.length>0;)if(e.charAt(n).isAlpha()){0!==n&&(t+=e.substring(0,n),e=e.substring(n),n=0);var a=e.search(/[1-5]/),r=e.search(/\s/);a>0&&a<7&&(r<0||r>a)?(t+=e.substring(0,a+1).convertPinyin(),e=e.substring(a+1)):r<0?(t+=e.substring(0),e=""):(t+=e.substring(0,r+1),e=e.substring(r+1))}else n>=e.length?(t+=e.substring(0),e=""):n++;return t},ee=function(e){var t=e.hanzi,n=e.pinyin,i=Object(D.a)(e,["hanzi","pinyin"]);if(t){var c=t.split(""),o=n.split(" ");return r.a.createElement("ruby",Object.assign({},i,{lang:"zh"}),c.map(function(e,t){return r.a.createElement(a.Fragment,{key:t+e},e,r.a.createElement("rt",null,X(o[t])))}))}return r.a.createElement(r.a.Fragment,null,X(n))},te=/([^\s!-\/:-@[-`{-~]+)?(?:\|([^\s!-\/:-@[-`{-~]+))?\[([\w\s]+)\]/;var ne,ae,re=function(e){for(var t,n=[],a=0,r=new RegExp(te,"g");null!=(t=r.exec(e));)n.push(e.substring(a,t.index)),n.push(t.slice(1)),a=r.lastIndex;return a<e.length&&n.push(e.substring(a)),n},ie=function(e){var t=e.text,n=Object(D.a)(e,["text"]);return r.a.createElement("div",Object.assign({className:"description"},n),re(t).map(function(e,t){if("string"===typeof e)return e;var n=Object(o.a)(e,3),a=n[0],i=n[2];return r.a.createElement(ee,{key:t,hanzi:a,pinyin:i})}))},ce=function(e){var t=e.entries,n=Object(D.a)(e,["entries"]);return r.a.createElement(K.a,Object.assign({},n,{show:t.length>0,placement:"bottom",popperConfig:{modifiers:{preventOverflow:{enabled:!1},hide:{enabled:!1}}}}),r.a.createElement(q.a,{id:"popover"},n.children))},oe=function(e){e.entries;var t=Object(D.a)(e,["entries"]);return r.a.createElement("div",{className:"fixed-popover"},t.children)},se=function(e){var t=e.entries,n=Object(D.a)(e,["entries"]),a=Q()()?oe:ce;return r.a.createElement(a,Object.assign({entries:t},n),r.a.createElement(Z.a,{size:"sm",className:"m-0"},r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{className:0===t?"highlight":"",key:"".concat(t,":").concat(e)},r.a.createElement("th",{lang:"cn"},r.a.createElement(ee,{hanzi:e.word,pinyin:e.pinyin})),r.a.createElement("td",null,r.a.createElement(ie,{text:e.description})))}))))},ue=function(e,t,n){for(var a=[],r=0;r<n&&!/^[\s\r\n]*$/.test(e.charAt(t-r));++r)for(var i=0;i<n&&!/^[\s\r\n]*$/.test(e.charAt(t+i));++i)a.push({word:e.substring(t-r,t+i+1),begin:t-r,end:t+i});return a},le=function(e){var t=e.db,n=e.text,i=e.onCharFocus,c=Object(D.a)(e,["db","text","onCharFocus"]),s=Object(a.useState)(void 0),u=Object(o.a)(s,2),l=u[0],d=u[1],f=Object(a.useState)([]),m=Object(o.a)(f,2),b=m[0],p=m[1],h=Object(a.useState)(void 0),g=Object(o.a)(h,2),j=g[0],x=g[1],w=l&&void 0!==l.dataset.index?parseInt(l.dataset.index):void 0;return Object(a.useEffect)(function(){return function(){var e=Object(O.a)(v.a.mark(function e(){var a,r,i,c,o,s,u,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"number"===typeof w){e.next=3;break}return e.abrupt("return");case 3:r=ue(n,w,8),i=!0,c=!1,o=void 0,e.prev=7,s=v.a.mark(function e(){var n,r,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.value,e.next=3,t.entries.where("word").equals(n.word).toArray();case 3:r=e.sent,i=r.map(function(e){return Object(E.a)({},e,n)}),a=[].concat(Object(_.a)(a),Object(_.a)(i));case 6:case"end":return e.stop()}},e)}),u=r[Symbol.iterator]();case 10:if(i=(l=u.next()).done){e.next=15;break}return e.delegateYield(s(),"t0",12);case 12:i=!0,e.next=10;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(7),c=!0,o=e.t1;case 21:e.prev=21,e.prev=22,i||null==u.return||u.return();case 24:if(e.prev=24,!c){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a=a.sort(function(e,t){return t.word.length-e.word.length}),x(a[0]),p(a);case 32:case"end":return e.stop()}},e,null,[[7,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}()(),function(){}},[t,n,l,w]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({},c,{className:"textview",onMouseOver:function(e){var t=e.target;"SPAN"===t.tagName&&d(t)},onMouseOut:function(){return d(void 0)},onClick:function(e){i&&i(w),c.onClick&&c.onClick(e)}}),n.split("").map(function(e,t){var n={"data-index":t,className:""};return j&&j.begin<=t&&t<=j.end&&(n.className="highlight"),"\n"===e?r.a.createElement("br",{key:e+t}):r.a.createElement("span",Object.assign({},n,{key:e+t}),e)})),r.a.createElement(se,{target:l,entries:b}))},de=function(e){return r.a.createElement(S.Context.Consumer,null,function(t){return r.a.createElement(le,Object.assign({},e,{db:t}))})},fe=function(e){var t=e.text,n=e.focus,i=Object(D.a)(e,["text","focus"]),c=Object(a.useRef)(null);return Object(a.useEffect)(function(){c.current&&c.current.focus()},[]),Object(a.useEffect)(function(){void 0!==n&&c.current&&c.current.setSelectionRange(n,n)},[n]),r.a.createElement("textarea",Object.assign({},i,{rows:t.split("\n").length,ref:c,value:t,className:"texteditor"}))},me=["\u8f93\u5165\u4e2d\u6587","","\u77e5\u5929\u4e4b\u6240\u4e3a,\u77e5\u4eba\u4e4b\u6240\u4e3a\u8005,\u81f3\u77e3\u3002","\u77e5\u5929\u4e4b\u6240\u4e3a\u8005,\u5929\u800c\u751f\u4e5f\uff1b\u77e5\u4eba\u4e4b\u6240\u4e3a\u8005,\u4ee5\u5176\u77e5\u4e4b\u6240\u77e5\u4ee5\u517b\u5176\u77e5\u4e4b\u6240\u4e0d\u77e5,\u7ec8\u5176\u5929\u5e74\u800c\u4e0d\u4e2d\u9053\u592d\u8005:\u662f\u77e5\u4e4b\u76db\u4e5f\u3002"].join("\n");!function(e){e[e.Edit=1]="Edit",e[e.Show=2]="Show"}(ae||(ae={}));var be=(ne={},Object(s.a)(ne,ae.Edit,{icon:h.b,text:"OK"}),Object(s.a)(ne,ae.Show,{icon:h.c,text:"Edit"}),ne),pe=function(){var e=Object(a.useState)(ae.Show),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(me),s=Object(o.a)(c,2),u=s[0],d=s[1],m=Object(a.useState)(void 0),g=Object(o.a)(m,2),v=g[0],E=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{bg:"dark",variant:"dark"},r.a.createElement(f.a.Brand,{href:"#"},r.a.createElement(p.a,{icon:h.a})," HoverDictCN"),r.a.createElement(Y,null),r.a.createElement(f.a.Collapse,{className:"justify-content-end"},r.a.createElement(f.a.Text,null,r.a.createElement(b.a,{variant:"outline-light",onMouseDown:function(){n===ae.Show?i(ae.Edit):i(ae.Show)}},r.a.createElement(p.a,{icon:be[n].icon})," ",be[n].text)))),r.a.createElement(l.a,null,r.a.createElement(S.Context.Provider,{value:new S},n===ae.Edit?r.a.createElement(fe,{lang:"zh",onChange:function(e){return d(e.target.value)},onBlur:function(e){return!Q()()&&i(ae.Show)},text:u,focus:v}):r.a.createElement(de,{lang:"zh",onClick:function(e){return!Q()()&&i(ae.Edit)},text:u,onCharFocus:function(e){return E(e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,t,n){e.exports=n(158)},93:function(e,t,n){},97:function(e,t,n){}},[[88,1,2]]]);